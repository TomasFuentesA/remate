<style>
  table {
    max-width: 980px;
    table-layout: fixed;
    margin: auto;
  }

  th,
  td {
    padding: 5px 10px;
    border: 1px solid #000;
    width: calc(100%/7);
    overflow: hidden;
  }

  thead,
  tfoot {
    background: #f9f9f9;
    display: table;
    width: 100%;
  }

  tbody {
    height: 300px;
    overflow: auto;
    overflow-x: hidden;
    display: block;
    width: 100%;
  }

  tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
  }
</style>
<%= link_to 'Volver Listado Juicios', judgements_path %>
<p></p>
<br>
<h1>Ficha Juicio:</h1>
<div class="main container">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 card card-body">
        <div>
          <h2>Juicio: <%= @judgement.court.name %> , <%= @judgement.rol_trial %> </h2>
        </div>
        <hr>
        <h1>Información básica:</h1>
        <div class="field">
          <h4> Tribunal:</h4>
          <%= @judgement.court.name %>
        </div>
        <div class="field">
          <h4>Rol</h4>
          <%= @judgement.rol_trial %>
        </div>
        <div class="field">
          <h4>Caratulado</h4>
          <%= @judgement.demandante %> / <%= @judgement.demandado %>
        </div>
        <div class="field">
          <h4>Demandante</h4>
          <%= @judgement.demandante %>
        </div>
        <div class="field">
          <h4>Abogado Demandante</h4>
          <%= @judgement.demandado %>
        </div>
        <div class="field">
          <h4>Demandanto</h4>
        </div>
        <div class="field">
          <h4>Abogado Demandanto</h4>
        </div>
        <div>
          <h3>Deuda judicial:</h3>
            <%= link_to 'Nueva deuda judicial', new_judgement_debt_path(@judgement) ,class: "btn btn-primary"%>
          <br><br>
          <%if @judgement.judgement_debt.any? %>
          <div class="field">
            <table class="table table-bordered table-hover">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Persona</th>
                  <th scope="col">Tipo persona</th>
                  <th scope="col">total</th>
                  <th scope="col">tipo moneda</th>
                  <th scope="col">fecha deuda</th>
                  <th scope="col">tipo deuda</th>
                  <th scope="col">opciones</th>
                </tr>
              </thead>
              <tbody>
                <% @judgement.judgement_debt.each do |judgementDebt| %>
                 <tr>
                  <td>
                  <% if judgementDebt.person_type == "Natural" %>
                    <%= link_to 'ver',  persona_path(judgementDebt.person_id) , class: "btn btn-info" %>
                  <% else %>
                    <%= link_to 'ver',  legal_persona_path(judgementDebt.person_id) , class: "btn btn-info" %>
                  <% end %>
                  </td>
                  <td><%= judgementDebt.person_type %></td>
                  <td><%= judgementDebt.money_total %></td>
                  <td><%= judgementDebt.money_type %></td>
                  <td><%= judgementDebt.debt_date %></td>
                  <td><%= JudgementDebt.type_judgement_debts.keys.to_a[judgementDebt.debt_type] %></td>
                  <td>
                    <%= link_to 'ver', judgementDebt , class: "btn btn-info" %>
                    <%= link_to 'editar', edit_judgement_debt_path(judgementDebt) , class: "btn btn-warning" %>
                    <%= link_to 'borrar', judgementDebt, method: :delete, data: { confirm: 'Esta seguro?' } ,class: "btn btn-danger"%>
                  </td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <% end %>
        </div>
        <div>
          <h3>Anotaciones:</h3>
          <%= link_to 'Nueva anotación Judicial', new_judicialfile_path(@judgement) ,class: "btn btn-primary"%>
          <br><br>
          <%if @judgement.judicialfiles.any? %>
          <div class="field">
            <table class="table table-bordered table-hover">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Fecha</th>
                  <th scope="col">Observacion</th>
                  <th scope="col">Archivo</th>
                  <th scope="col">Opciones</th>
                </tr>
              </thead>
              <tbody>
                <% @judgement.judicialfiles.each do |judicialfile| %>
                <tr>
                  <td><%= judicialfile.date %></td>
                  <td><%= judicialfile.obs%></td>
                  <% if judicialfile.file_name != "" && judicialfile.file_name.to_s.split('/')[5]!=nil %>
                  <td>
                    <%= link_to judicialfile.file_name.to_s.split('/')[5], File.join(root_url.to_s,judicialfile.file_name.to_s), target: "_blank"%>
                    <%= link_to 'Descargar', File.join(root_url.to_s,judicialfile.file_name.to_s),download:''%>
                  </td>
                  <%else %>
                  <td>Sin Archivo</td>
                  <% end %>
                  <td>
                    <%= link_to 'ver', judicialfile , class: "btn btn-info" %>
                    <%= link_to 'editar', edit_judicialfile_path(judicialfile) , class: "btn btn-warning" %>
                    <%= link_to 'borrar', judicialfile, method: :delete, data: { confirm: 'Esta seguro?' } ,class: "btn btn-danger"%>
                  </td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <% end %>
        </div>
      </div>
      <br>
    </div>
  </div>
</div>