<h1>Personas</h1>

<script>
  function myFunction(value) {
    console.log(value)

    var form = $("#live-search-form"); // grab the form wrapping the search bar.
  
    var url = "/personas/search"; // live_search action.   
    var formData = form.serialize(); // grab the data in the form   

    console.log(url)
    console.log(formData)

    $.get(url, formData, function(html) { // perform an AJAX get
      //$("#live-search-results").html(html); // replace the "results" div with the results

      console.log(html)
    })
}
</script>

<%= form_tag personas_path, :id => "live-search-form" do %>

  <input id="big-search-box" name="q" type="text" onkeypress="myFunction(value)"/>     
<% end %>

<br>
<%= link_to  new_persona_path ,class: "btn btn-primary" do%>
<%= fa_icon "plus"%> Nueva Persona
<% end %>
<br>
<table id="myTable" class="table table-bordered table-hover">

  <thead class="thead-dark">
    <tr>
      <th scope="col">Rut</th>
      <th scope="col">Nombre</th>
      <th scope="col">Estado civil</th>
      <th scope="col">Profesion</th>
      <th scope="col">Fecha de Nacimiento</th>
      <th scope="col">Nacionalidad</th>
      <th scope="col">Pasaporte</th>
      <th scope="col">Opciones</th>
    </tr>
  </thead>




  <tbody>
    <% @personas.each do |persona| %>

      <tr>
        <td scope="row"><%= persona.rut %></td>
        <td><%= persona.name %>
        <%= persona.name2 %>
        <%= persona.last_name1 %>
        <%= persona.last_name2 %></td>
        <td><%= persona.e_civil %></td>
        <td><%= persona.profesion %></td>
        <td><%= persona.birth_date %></td>
        <td><%= persona.nacionality %></td>
        <td><%= persona.passport %></td>
        <td> <%= link_to   persona ,class:"btn btn-info"  do %>
           <%= fa_icon "address-card"%> Ver
          <% end %>
          <%= link_to   edit_persona_path(persona) ,class:"btn btn-warning"  do %>
             <%= fa_icon "address-card"%> Editar
            <% end %>

          <%= link_to  persona, method: :delete, data: { confirm: 'Estas seguro?' } ,class: "btn btn-danger"  do%>
          <%= fa_icon "ban"%> Eliminar
         <% end %>
                <%end%></td>
      </tr>

  </tbody>
</table>


<br>
